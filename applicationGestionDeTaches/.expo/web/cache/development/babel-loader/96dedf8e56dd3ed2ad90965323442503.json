{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { signUp } from \"../API/todoAPI\";\nimport { TokenContext } from \"../Context/Context\";\nimport { UsernameContext } from \"../Context/Context\";\nexport default function SignUp() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    login = _useState2[0],\n    setLogin = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    copyPassword = _useState6[0],\n    setCopyPassword = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    error = _useState8[0],\n    setError = _useState8[1];\n  var _useState9 = useState(true),\n    _useState10 = _slicedToArray(_useState9, 2),\n    visible = _useState10[0],\n    setVisible = _useState10[1];\n  var getSignedUp = function getSignedUp(setToken, setUsername) {\n    setError('');\n    if (login == '' || password == '' || copyPassword == '') return;\n    if (password != copyPassword) {\n      setError(\"Passwords don't match\");\n      return;\n    }\n    setVisible(false);\n    signUp(login, password).then(function (token) {\n      setUsername(login);\n      setToken(token);\n      console.log('token', token);\n    }).catch(function (err) {\n      setError(err.message);\n    });\n    setVisible(true);\n  };\n  return React.createElement(TokenContext.Consumer, null, function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      token = _ref2[0],\n      setToken = _ref2[1];\n    return React.createElement(UsernameContext.Consumer, null, function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        username = _ref4[0],\n        setUsername = _ref4[1];\n      return React.createElement(View, null, visible ? React.createElement(React.Fragment, null, React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        }\n      }, React.createElement(Text, {\n        style: styles.label\n      }, \"Login\"), React.createElement(TextInput, {\n        style: styles.text_input,\n        onChangeText: setLogin,\n        onSubmitEditing: function onSubmitEditing() {\n          return getSignedUp(setToken, setUsername);\n        },\n        value: login\n      })), React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        }\n      }, React.createElement(Text, {\n        style: styles.label\n      }, \"Password\"), React.createElement(TextInput, {\n        style: styles.text_input,\n        onChangeText: setPassword,\n        secureTextEntry: true,\n        onSubmitEditing: function onSubmitEditing() {\n          return getSignedUp(setToken, setUsername);\n        },\n        value: password\n      })), React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        }\n      }, React.createElement(Text, {\n        style: styles.label\n      }, \"Password Again\"), React.createElement(TextInput, {\n        style: styles.text_input,\n        onChangeText: setCopyPassword,\n        secureTextEntry: true,\n        onSubmitEditing: function onSubmitEditing() {\n          return getSignedUp(setToken, setUsername);\n        },\n        value: copyPassword\n      })), React.createElement(Button, {\n        onPress: function onPress() {\n          return getSignedUp(setToken, setUsername);\n        },\n        title: \"Inscription\"\n      }), error ? React.createElement(Text, {\n        style: styles.text_error\n      }, error) : []) : React.createElement(ActivityIndicator, null));\n    });\n  });\n}\nvar styles = StyleSheet.create({\n  label: {\n    width: 70\n  },\n  text_error: {\n    color: 'red'\n  },\n  text_input: {\n    backgroundColor: 'white',\n    margin: 5\n  }\n});","map":{"version":3,"names":["React","useState","signUp","TokenContext","UsernameContext","SignUp","login","setLogin","password","setPassword","copyPassword","setCopyPassword","error","setError","visible","setVisible","getSignedUp","setToken","setUsername","then","token","console","log","catch","err","message","username","flexDirection","styles","label","text_input","text_error","StyleSheet","create","width","color","backgroundColor","margin"],"sources":["/home/marta/Documents/L3/React/projetreact-marta-sara/tp4/components/SignUp.js"],"sourcesContent":["import React, { useState } from 'react'\nimport {\n  Text,\n  TextInput,\n  Button,\n  View,\n  StyleSheet,\n  ActivityIndicator\n} from 'react-native'\n\nimport { signUp } from '../API/todoAPI'\n\nimport { TokenContext } from '../Context/Context'\nimport { UsernameContext } from '../Context/Context'\n\nexport default function SignUp () {\n  const [login, setLogin] = useState('')\n  const [password, setPassword] = useState('')\n  const [copyPassword, setCopyPassword] = useState('')\n  const [error, setError] = useState('')\n  const [visible, setVisible] = useState(true)\n\n  const getSignedUp = (setToken, setUsername) => {\n    setError('')\n    if (login == '' || password == '' || copyPassword == '') return\n    if (password != copyPassword){\n        setError(\"Passwords don't match\")\n        return\n    } \n    setVisible(false)\n    signUp(login, password)\n      .then(token => {\n        setUsername(login)\n        setToken(token)\n        console.log('token', token)\n      })\n      .catch(err => {\n        setError(err.message)\n      })\n    setVisible(true)\n  }\n\n  return (\n    <TokenContext.Consumer>\n      {([token, setToken]) => (\n        <UsernameContext.Consumer>\n          {([username, setUsername]) => {\n            return (\n              <View>\n                {visible ? (\n                  <>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Login</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setLogin}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={login}\n                      />\n                    </View>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Password</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setPassword}\n                        secureTextEntry={true}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={password}\n                      />\n                    </View>\n                    <View style={{ flexDirection: 'row' }}>\n                      <Text style={styles.label}>Password Again</Text>\n                      <TextInput\n                        style={styles.text_input}\n                        onChangeText={setCopyPassword}\n                        secureTextEntry={true}\n                        onSubmitEditing={() =>\n                          getSignedUp(setToken, setUsername)\n                        }\n                        value={copyPassword}\n                      />\n                    </View>\n                    <Button\n                      onPress={() => getSignedUp(setToken, setUsername)}\n                      title='Inscription'\n                    />\n                    {error ? (\n                      <Text style={styles.text_error}>{error}</Text>\n                    ) : (\n                      []\n                    )}\n                  </>\n                ) : (\n                  <ActivityIndicator />\n                )}\n              </View>\n            )\n          }}\n        </UsernameContext.Consumer>\n      )}\n    </TokenContext.Consumer>\n  )\n}\n\nconst styles = StyleSheet.create({\n  label: {\n    width: 70\n  },\n  text_error: {\n    color: 'red'\n  },\n  text_input: {\n    //borderWidth: 1,\n    backgroundColor: 'white',\n    margin: 5\n  }\n})\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUvC,SAASC,MAAM;AAEf,SAASC,YAAY;AACrB,SAASC,eAAe;AAExB,eAAe,SAASC,MAAM,GAAI;EAChC,gBAA0BJ,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BK,KAAK;IAAEC,QAAQ;EACtB,iBAAgCN,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCO,QAAQ;IAAEC,WAAW;EAC5B,iBAAwCR,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7CS,YAAY;IAAEC,eAAe;EACpC,iBAA0BV,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BW,KAAK;IAAEC,QAAQ;EACtB,iBAA8BZ,QAAQ,CAAC,IAAI,CAAC;IAAA;IAArCa,OAAO;IAAEC,UAAU;EAE1B,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAIC,QAAQ,EAAEC,WAAW,EAAK;IAC7CL,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAIP,KAAK,IAAI,EAAE,IAAIE,QAAQ,IAAI,EAAE,IAAIE,YAAY,IAAI,EAAE,EAAE;IACzD,IAAIF,QAAQ,IAAIE,YAAY,EAAC;MACzBG,QAAQ,CAAC,uBAAuB,CAAC;MACjC;IACJ;IACAE,UAAU,CAAC,KAAK,CAAC;IACjBb,MAAM,CAACI,KAAK,EAAEE,QAAQ,CAAC,CACpBW,IAAI,CAAC,UAAAC,KAAK,EAAI;MACbF,WAAW,CAACZ,KAAK,CAAC;MAClBW,QAAQ,CAACG,KAAK,CAAC;MACfC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,KAAK,CAAC;IAC7B,CAAC,CAAC,CACDG,KAAK,CAAC,UAAAC,GAAG,EAAI;MACZX,QAAQ,CAACW,GAAG,CAACC,OAAO,CAAC;IACvB,CAAC,CAAC;IACJV,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;EAED,OACE,oBAAC,YAAY,CAAC,QAAQ,QACnB;IAAA;MAAEK,KAAK;MAAEH,QAAQ;IAAA,OAChB,oBAAC,eAAe,CAAC,QAAQ,QACtB,iBAA6B;MAAA;QAA3BS,QAAQ;QAAER,WAAW;MACtB,OACE,oBAAC,IAAI,QACFJ,OAAO,GACN,0CACE,oBAAC,IAAI;QAAC,KAAK,EAAE;UAAEa,aAAa,EAAE;QAAM;MAAE,GACpC,oBAAC,IAAI;QAAC,KAAK,EAAEC,MAAM,CAACC;MAAM,WAAa,EACvC,oBAAC,SAAS;QACR,KAAK,EAAED,MAAM,CAACE,UAAW;QACzB,YAAY,EAAEvB,QAAS;QACvB,eAAe,EAAE;UAAA,OACfS,WAAW,CAACC,QAAQ,EAAEC,WAAW,CAAC;QAAA,CACnC;QACD,KAAK,EAAEZ;MAAM,EACb,CACG,EACP,oBAAC,IAAI;QAAC,KAAK,EAAE;UAAEqB,aAAa,EAAE;QAAM;MAAE,GACpC,oBAAC,IAAI;QAAC,KAAK,EAAEC,MAAM,CAACC;MAAM,cAAgB,EAC1C,oBAAC,SAAS;QACR,KAAK,EAAED,MAAM,CAACE,UAAW;QACzB,YAAY,EAAErB,WAAY;QAC1B,eAAe,EAAE,IAAK;QACtB,eAAe,EAAE;UAAA,OACfO,WAAW,CAACC,QAAQ,EAAEC,WAAW,CAAC;QAAA,CACnC;QACD,KAAK,EAAEV;MAAS,EAChB,CACG,EACP,oBAAC,IAAI;QAAC,KAAK,EAAE;UAAEmB,aAAa,EAAE;QAAM;MAAE,GACpC,oBAAC,IAAI;QAAC,KAAK,EAAEC,MAAM,CAACC;MAAM,oBAAsB,EAChD,oBAAC,SAAS;QACR,KAAK,EAAED,MAAM,CAACE,UAAW;QACzB,YAAY,EAAEnB,eAAgB;QAC9B,eAAe,EAAE,IAAK;QACtB,eAAe,EAAE;UAAA,OACfK,WAAW,CAACC,QAAQ,EAAEC,WAAW,CAAC;QAAA,CACnC;QACD,KAAK,EAAER;MAAa,EACpB,CACG,EACP,oBAAC,MAAM;QACL,OAAO,EAAE;UAAA,OAAMM,WAAW,CAACC,QAAQ,EAAEC,WAAW,CAAC;QAAA,CAAC;QAClD,KAAK,EAAC;MAAa,EACnB,EACDN,KAAK,GACJ,oBAAC,IAAI;QAAC,KAAK,EAAEgB,MAAM,CAACG;MAAW,GAAEnB,KAAK,CAAQ,GAE9C,EACD,CACA,GAEH,oBAAC,iBAAiB,OACnB,CACI;IAEX,CAAC,CACwB;EAAA,CAC5B,CACqB;AAE5B;AAEA,IAAMgB,MAAM,GAAGI,UAAU,CAACC,MAAM,CAAC;EAC/BJ,KAAK,EAAE;IACLK,KAAK,EAAE;EACT,CAAC;EACDH,UAAU,EAAE;IACVI,KAAK,EAAE;EACT,CAAC;EACDL,UAAU,EAAE;IAEVM,eAAe,EAAE,OAAO;IACxBC,MAAM,EAAE;EACV;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module"}