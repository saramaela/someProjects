{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Token } from \"graphql\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport { createTask, taskList, deleteTask } from \"../API/todoAPI\";\nimport todoData from \"../Helpers/todoData\";\nimport TodoItem from \"./TodoItem\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nexport default function TodoList() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    todos = _useState2[0],\n    setTodos = _useState2[1];\n  var _useState3 = useState(todoData),\n    _useState4 = _slicedToArray(_useState3, 2),\n    todosScreen = _useState4[0],\n    setTodosScreen = _useState4[1];\n  var _useState5 = useState(todos.filter(function (item) {\n      return item.done;\n    }).length),\n    _useState6 = _slicedToArray(_useState5, 2),\n    count = _useState6[0],\n    setCount = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    newTodoText = _useState8[0],\n    setNewTodoText = _useState8[1];\n  var token = React.useContext(TokenContext);\n  var username = React.useContext(UsernameContext);\n  useEffect(function () {\n    getTaskList();\n  });\n  function getTaskList() {\n    taskList(username[0], token[0]).then(function (data) {\n      if (JSON.stringify(todos) != JSON.stringify(data)) {\n        setTodos(data);\n        setTodosScreen(data);\n      }\n    });\n  }\n  var updateCountItemDone = function updateCountItemDone(id) {\n    var newTodos = todos.map(function (todo) {\n      if (todo.id === id) {\n        todo.done = !todo.done;\n      }\n      return todo;\n    });\n    console.log(\"todos\", newTodos);\n    setTodos(newTodos);\n    setTodosScreen(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n  };\n  var addNewTodo = function addNewTodo() {\n    var newTask = createTask(newTodoText, username[0], token[0]);\n    var newTodos = [].concat(_toConsumableArray(todos), [{\n      newTask: newTask\n    }]);\n    setTodos(newTodos);\n    setTodosScreen(newTodos);\n    setNewTodoText(\"\");\n  };\n  var progressTodo = function progressTodo() {\n    var solved = todos.filter(function (item) {\n      return item.done == false;\n    });\n    setTodosScreen(solved);\n  };\n\n  var solvedTodo = function solvedTodo() {\n    var solved = todos.filter(function (item) {\n      return item.done == true;\n    });\n    setTodosScreen(solved);\n  };\n  var allTodos = function allTodos() {\n    var solved = todos;\n    setTodosScreen(solved);\n  };\n  var checkAllTodos = function checkAllTodos() {\n    var newTodos = todos.map(function (todo) {\n      if (todo.done === false) todo.done = true;\n      return todo;\n    });\n    setTodos(newTodos);\n    setTodosScreen(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n  };\n  var uncheckAllTodos = function uncheckAllTodos() {\n    var newTodos = todos.map(function (todo) {\n      if (todo.done === true) todo.done = false;\n      return todo;\n    });\n    setTodos(newTodos);\n    setTodosScreen(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n  };\n  var deleteTodo = function deleteTodo(id) {\n    deleteTask(id, token[0]);\n    var newTodos = getTaskList();\n    setTodos(newTodos);\n    setTodosScreen(newTodos);\n  };\n  return React.createElement(View, null, React.createElement(FlatList, {\n    style: {\n      paddingLeft: 10\n    },\n    data: todosScreen,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(TodoItem, {\n        item: item,\n        deleteTodo: deleteTodo,\n        updateCountItemDone: updateCountItemDone,\n        checkAllTodos: checkAllTodos,\n        uncheckAllTodos: uncheckAllTodos\n      });\n    }\n  }), React.createElement(Text, null, \"Le nombre d'item dans TodoData est \", todos.length, '\\n', \"Le nombre d'item realis\\xE9 est \", count), React.createElement(TextInput, {\n    onChangeText: setNewTodoText,\n    placeholder: \"saisir ici un nouvel item\",\n    onSubmitEditing: addNewTodo,\n    value: newTodoText\n  }), React.createElement(Button, {\n    color: \"#32612D\",\n    title: \"Cr\\xE9er nouvel item\",\n    onPress: addNewTodo\n  }, \"New\"), React.createElement(Button, {\n    color: \"#32612D\",\n    title: \"Cocher tout\",\n    onPress: checkAllTodos\n  }, \"New\"), React.createElement(Button, {\n    color: \"#32612D\",\n    title: \"D\\xE9cocher tout\",\n    onPress: uncheckAllTodos\n  }, \"New\"), React.createElement(Button, {\n    color: \"#DD571C\",\n    title: \"Todos r\\xE9solus\",\n    onPress: solvedTodo\n  }, \"New\"), React.createElement(Button, {\n    color: \"#2C3E4C\",\n    title: \"Todos en cours\",\n    onPress: progressTodo\n  }, \"New\"), React.createElement(Button, {\n    color: \"#0080FF\",\n    title: \"Tous les Todos (confondus)\",\n    onPress: allTodos\n  }, \"New\"));\n}\nvar styles = StyleSheet.create({\n  content: {\n    flexDirection: 'row'\n  },\n  button: {\n    marginLeft: 10,\n    width: 150\n  }\n});","map":{"version":3,"names":["Token","React","useState","useEffect","createTask","taskList","deleteTask","todoData","TodoItem","TokenContext","UsernameContext","TodoList","todos","setTodos","todosScreen","setTodosScreen","filter","item","done","length","count","setCount","newTodoText","setNewTodoText","token","useContext","username","getTaskList","then","data","JSON","stringify","updateCountItemDone","id","newTodos","map","todo","console","log","addNewTodo","newTask","progressTodo","solved","solvedTodo","allTodos","checkAllTodos","uncheckAllTodos","deleteTodo","paddingLeft","styles","StyleSheet","create","content","flexDirection","button","marginLeft","width"],"sources":["/home/marta/Documents/L3/React/projetreact-marta-sara/tp4/components/TodoList.js"],"sourcesContent":["import { Token } from \"graphql\";\nimport React, {useState, useEffect } from \"react\";\nimport { StyleSheet, View, TextInput, Button, Text, FlatList, Switch } from 'react-native';\nimport { createTask, taskList, deleteTask } from \"../API/todoAPI\";\n\nimport todoData from '../Helpers/todoData';\nimport TodoItem from './TodoItem';\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\n\n\nexport default function TodoList(){\n   /** initialiser todos afin de pouvoir l'utiliser avec les changements d'états*/\n   const [todos, setTodos]= useState([])\n   const [todosScreen, setTodosScreen] = useState(todoData)\n   const [count, setCount]= useState(todos.filter(item => item.done).length)\n   const [newTodoText, setNewTodoText] = useState(\"\")\n   const token = React.useContext(TokenContext)\n   const username = React.useContext(UsernameContext)\n   \n   useEffect(() => {\n      getTaskList()\n  }\n  );\n   \n   function getTaskList() {\n      \n      taskList(username[0], token[0]).then(data => {\n         if (JSON.stringify(todos) != JSON.stringify(data)) {\n            setTodos(data);\n            setTodosScreen(data);\n         }\n\n      })\n   }\n   \n   const updateCountItemDone = (id) =>{\n      /**compte les fonctions realisées et actualise au fur et à mesure */\n      const newTodos = todos.map((todo) => {\n      if (todo.id === id) {\n         todo.done = !todo.done;\n      } \n      return todo;\n      });\n      console.log(\"todos\", newTodos)\n      \n      setTodos(newTodos);\n      setTodosScreen(newTodos)\n\n      setCount(newTodos.filter(item => item.done).length);\n\n   }\n\n   \n\n\n   const addNewTodo = () =>{\n      /**ajoute un nouvel item à notre liste de taches */\n      const newTask = createTask(newTodoText,username[0],token[0])\n      const newTodos = [...todos, {newTask}]\n      setTodos(newTodos)\n      setTodosScreen(newTodos)\n      setNewTodoText(\"\")\n   }\n   \n\n   const progressTodo = () =>{\n      /**affiche les todos pas encore réalisés cad todos non cochés*/\n      const solved = todos.filter(item => item.done == false)\n      setTodosScreen(solved);\n     }\n\n   // const allTodo = () =>{\n   //    /**affiche tous les todos sans tenir compte de leur état de realisation*/\n   //    setTodos(todos)  \n   // }\n\n\n   const solvedTodo = () =>{\n      /**affiche les todos dont l'exécution est terminée cad todos cochés*/\n      const solved = todos.filter(item => item.done == true)\n      setTodosScreen(solved);\n   }\n\n   const allTodos = () =>{\n      /**affiche les todos qu'ils soient cochés ou non*/\n      const solved = todos\n      setTodosScreen(solved);\n   }\n\n\n   const checkAllTodos = () =>{\n        const newTodos = todos.map((todo) => {\n            if (todo.done === false)\n                todo.done = true\n            return todo\n            \n            });\n            setTodos(newTodos)\n            setTodosScreen(newTodos)\n            setCount(newTodos.filter(item => item.done).length)\n   }\n   \n   const uncheckAllTodos = () =>{\n    const newTodos = todos.map((todo) => {\n        if (todo.done === true)\n            todo.done = false\n        return todo\n        \n        });\n        setTodos(newTodos)\n        setTodosScreen(newTodos)\n        setCount(newTodos.filter(item => item.done).length)\n}\n\n   const deleteTodo = (id) => {\n      /**permet la suppression d'un item donné en paramètre */\n      deleteTask(id,token[0])\n      const newTodos = getTaskList()\n      setTodos(newTodos)\n      setTodosScreen(newTodos)\n   }\n\n\n\n   return (\n      <View>\n\n         <FlatList\n            style={{ paddingLeft: 10 }}\n            data={todosScreen}\n            renderItem={({item}) => <TodoItem item={item} deleteTodo={deleteTodo} updateCountItemDone={updateCountItemDone}\n            checkAllTodos={checkAllTodos} uncheckAllTodos={uncheckAllTodos}/>}  />\n\n         <Text>\n            Le nombre d'item dans TodoData est {todos.length}\n            {'\\n'} \n            Le nombre d'item realisé est {count}\n\n         </Text>\n\n\n         <TextInput\n            onChangeText={setNewTodoText}\n            placeholder='saisir ici un nouvel item'\n            onSubmitEditing={addNewTodo}\n            \n            value={newTodoText}\n         />\n\n         <Button color='#32612D' title=\"Créer nouvel item\" onPress={addNewTodo}>New</Button>\n\n         <Button color='#32612D' title=\"Cocher tout\" onPress={checkAllTodos}>New</Button>\n\n         <Button color='#32612D' title=\"Décocher tout\" onPress={uncheckAllTodos}>New</Button>\n\n         <Button color='#DD571C' title=\"Todos résolus\" onPress={solvedTodo}>New</Button>\n\n         <Button color='#2C3E4C' title=\"Todos en cours\" onPress={progressTodo}>New</Button>\n\n         <Button color='#0080FF' title=\"Tous les Todos (confondus)\" onPress={allTodos}>New</Button>\n\n\n         {/* \n\n        \n         <Button color='#1FD655' title=\"Tout afficher\" onPress={allTodo}>New</Button> */}\n\n\n      </View>\n\n\n        \n        \n\n       \n   );\n}\n\nconst styles = StyleSheet.create({\n   content: {\n      flexDirection: 'row',\n   },\n   button: {\n      marginLeft: 10,\n      width: 150,\n      \n      \n   }\n})"],"mappings":"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"},"metadata":{},"sourceType":"module"}